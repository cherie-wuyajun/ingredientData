var utils = require('velocityjs/src/utils');
var Helper = require('velocityjs/src/helper');
function Velocity(asts, config) {
  this.asts = asts;
  this.config = utils.mixin(
    {
      // 自动输出为经过html e输出
      escape: true,
      // 不需要转义的白名单
      unescape: {},
      valueMapper(value) {
        return value;
      },
    },
    config
  );
  this._state = { stop: false, break: false };
  this.init();
}

Velocity.Helper = Helper;
Velocity.prototype = {
  constructor: Velocity
};

require('velocityjs/src/compile/blocks')(Velocity, utils);
require('velocityjs/src/compile/literal')(Velocity, utils);
require('velocityjs/src/compile/references')(Velocity, utils);
require('velocityjs/src/compile/set')(Velocity, utils);
require('velocityjs/src/compile/expression')(Velocity, utils);
require('velocityjs/src/compile/compile')(Velocity, utils);
module.exports = Velocity;
