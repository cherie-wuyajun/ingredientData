// https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask
var $export = require('core-js/modules/_export');
var microtask = require('core-js/modules/_microtask')();
var process = require('core-js/modules/_global').process;
var isNode = require('core-js/modules/_cof')(process) == 'process';

$export($export.G, {
  asap: function asap(fn) {
    var domain = isNode && process.domain;
    microtask(domain ? domain.bind(fn) : fn);
  }
});
